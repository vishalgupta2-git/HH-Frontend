import HomeHeader from '@/components/Home/HomeHeader';
import { LinearGradient } from 'expo-linear-gradient';
import React, { useRef, useState, useEffect } from 'react';
import { Modal, ScrollView, StyleSheet, Text, TextInput, TouchableOpacity, View, Linking } from 'react-native';
import HighlightedText from '@/components/Home/HighlightedText';
import AsyncStorage from '@react-native-async-storage/async-storage';
import { useLanguage } from '@/contexts/LanguageContext';

export const options = { headerShown: false };

export default function NavratriScreen() {
  const { isHindi } = useLanguage();
  const scrollRef = useRef<ScrollView>(null);
  const sectionY = useRef<{ [key: string]: number }>({});
  const [searchHighlight, setSearchHighlight] = useState('');

  // Hindi translations for sections and content
  const translations = {
    sections: {
      importance: { en: 'Importance of Navratri', hi: 'рдирд╡рд░рд╛рддреНрд░рд┐ рдХрд╛ рдорд╣рддреНрд╡' },
      dates: { en: 'When is Navratri Celebrated?', hi: 'рдирд╡рд░рд╛рддреНрд░рд┐ рдХрдм рдордирд╛рдИ рдЬрд╛рддреА рд╣реИ?' },
      poojaVidhi: { en: 'Navratri Pooja Vidhi (Step by Step)', hi: 'рдирд╡рд░рд╛рддреНрд░рд┐ рдкреВрдЬрд╛ рд╡рд┐рдзрд┐ (рдЪрд░рдгрдмрджреНрдз)' },
      difference: { en: 'Difference Between Chaitra & Sharad Navratri', hi: 'рдЪреИрддреНрд░ рдФрд░ рд╢рд╛рд░рджреАрдп рдирд╡рд░рд╛рддреНрд░рд┐ рдореЗрдВ рдЕрдВрддрд░' },
      story: { en: 'Navratri Story (Summary)', hi: 'рдирд╡рд░рд╛рддреНрд░рд┐ рдХреА рдХрд╣рд╛рдиреА (рд╕рд╛рд░рд╛рдВрд╢)' },
    },
    content: {
      title: { en: 'ЁЯМ╕ Navratri тАУ Importance, Dates, Pooja & Katha', hi: 'ЁЯМ╕ рдирд╡рд░рд╛рддреНрд░рд┐ тАУ рдорд╣рддреНрд╡, рддрд┐рдерд┐рдпрд╛рдВ, рдкреВрдЬрд╛ рдФрд░ рдХрдерд╛' },
      importance: {
        intro: {
          en: 'Navratri (literally "Nine Nights") is one of the most sacred Hindu festivals dedicated to Goddess Durga and her nine forms (Navadurga). It symbolizes:',
          hi: 'рдирд╡рд░рд╛рддреНрд░рд┐ (рд╢рд╛рдмреНрджрд┐рдХ рд░реВрдк рд╕реЗ "рдиреМ рд░рд╛рддреЗрдВ") рджреЗрд╡реА рджреБрд░реНрдЧрд╛ рдФрд░ рдЙрдирдХреЗ рдиреМ рд░реВрдкреЛрдВ (рдирд╡рджреБрд░реНрдЧрд╛) рдХреЛ рд╕рдорд░реНрдкрд┐рдд рд╕рдмрд╕реЗ рдкрд╡рд┐рддреНрд░ рд╣рд┐рдВрджреВ рддреНрдпреЛрд╣рд╛рд░реЛрдВ рдореЗрдВ рд╕реЗ рдПрдХ рд╣реИред рдпрд╣ рдкреНрд░рддреАрдХ рд╣реИ:'
        },
        points: {
          en: 'тАв The victory of good over evil тАУ Goddess Durga defeating Mahishasura.\nтАв The celebration of Shakti (Divine Feminine energy).\nтАв A time for spiritual discipline through fasting, prayers, devotion, and self-control.\nтАв The nine nights represent nine divine forms of Maa Durga тАУ Shailputri, Brahmacharini, Chandraghanta, Kushmanda, Skandamata, Katyayani, Kalaratri, Mahagauri, and Siddhidatri.\nтАв By worshipping the Goddess in these forms, devotees receive strength, wisdom, protection, prosperity, and liberation (moksha).',
          hi: 'тАв рдмреБрд░рд╛рдИ рдкрд░ рдЕрдЪреНрдЫрд╛рдИ рдХреА рдЬреАрдд тАУ рджреЗрд╡реА рджреБрд░реНрдЧрд╛ рджреНрд╡рд╛рд░рд╛ рдорд╣рд┐рд╖рд╛рд╕реБрд░ рдХрд╛ рд╡рдзред\nтАв рд╢рдХреНрддрд┐ (рджрд┐рд╡реНрдп рд╕реНрддреНрд░реА рдКрд░реНрдЬрд╛) рдХрд╛ рдЙрддреНрд╕рд╡ред\nтАв рдЙрдкрд╡рд╛рд╕, рдкреНрд░рд╛рд░реНрдердирд╛, рднрдХреНрддрд┐ рдФрд░ рдЖрддреНрдо-рдирд┐рдпрдВрддреНрд░рдг рдХреЗ рдорд╛рдзреНрдпрдо рд╕реЗ рдЖрдзреНрдпрд╛рддреНрдорд┐рдХ рдЕрдиреБрд╢рд╛рд╕рди рдХрд╛ рд╕рдордпред\nтАв рдиреМ рд░рд╛рддреЗрдВ рдорд╛рдВ рджреБрд░реНрдЧрд╛ рдХреЗ рдиреМ рджрд┐рд╡реНрдп рд░реВрдкреЛрдВ рдХрд╛ рдкреНрд░рддрд┐рдирд┐рдзрд┐рддреНрд╡ рдХрд░рддреА рд╣реИрдВ тАУ рд╢реИрд▓рдкреБрддреНрд░реА, рдмреНрд░рд╣реНрдордЪрд╛рд░рд┐рдгреА, рдЪрдВрджреНрд░рдШрдВрдЯрд╛, рдХреВрд╖реНрдорд╛рдВрдбрд╛, рд╕реНрдХрдВрджрдорд╛рддрд╛, рдХрд╛рддреНрдпрд╛рдпрдиреА, рдХрд╛рд▓рд░рд╛рддреНрд░рд┐, рдорд╣рд╛рдЧреМрд░реА, рдФрд░ рд╕рд┐рджреНрдзрд┐рджрд╛рддреНрд░реАред\nтАв рдЗрди рд░реВрдкреЛрдВ рдореЗрдВ рджреЗрд╡реА рдХреА рдкреВрдЬрд╛ рдХрд░рдХреЗ, рднрдХреНрддреЛрдВ рдХреЛ рд╢рдХреНрддрд┐, рдЬреНрдЮрд╛рди, рд╕реБрд░рдХреНрд╖рд╛, рд╕рдореГрджреНрдзрд┐ рдФрд░ рдореЛрдХреНрд╖ рдкреНрд░рд╛рдкреНрдд рд╣реЛрддрд╛ рд╣реИред'
        }
      },
      dates: {
        chaitra: {
          title: { en: 'Chaitra Navratri', hi: 'рдЪреИрддреНрд░ рдирд╡рд░рд╛рддреНрд░рд┐' },
          text: {
            en: 'Celebrated in the Hindu month of Chaitra (MarchтАУApril).\nStarts from Pratipada (1st day) of Shukla Paksha and ends on Navami (9th day) with Ram Navami (birth of Lord Rama).',
            hi: 'рд╣рд┐рдВрджреВ рдорд╣реАрдиреЗ рдЪреИрддреНрд░ (рдорд╛рд░реНрдЪ-рдЕрдкреНрд░реИрд▓) рдореЗрдВ рдордирд╛рдИ рдЬрд╛рддреА рд╣реИред\nрд╢реБрдХреНрд▓ рдкрдХреНрд╖ рдХреА рдкреНрд░рддрд┐рдкрджрд╛ (1 рджрд┐рди) рд╕реЗ рд╢реБрд░реВ рд╣реЛрдХрд░ рд░рд╛рдо рдирд╡рдореА (рднрдЧрд╡рд╛рди рд░рд╛рдо рдХрд╛ рдЬрдиреНрдо) рдХреЗ рд╕рд╛рде рдирд╡рдореА (9рд╡реЗрдВ рджрд┐рди) рдкрд░ рд╕рдорд╛рдкреНрдд рд╣реЛрддреА рд╣реИред'
          }
        },
        sharad: {
          title: { en: 'Sharad Navratri', hi: 'рд╢рд╛рд░рджреАрдп рдирд╡рд░рд╛рддреНрд░рд┐' },
          text: {
            en: 'Celebrated in the Hindu month of Ashwin (SeptemberтАУOctober).\nStarts from Pratipada of Shukla Paksha and ends on Navami (9th day).\nThe 10th day is celebrated as Vijaya Dashami (Dussehra).',
            hi: 'рд╣рд┐рдВрджреВ рдорд╣реАрдиреЗ рдЖрд╢реНрд╡рд┐рди (рд╕рд┐рддрдВрдмрд░-рдЕрдХреНрдЯреВрдмрд░) рдореЗрдВ рдордирд╛рдИ рдЬрд╛рддреА рд╣реИред\nрд╢реБрдХреНрд▓ рдкрдХреНрд╖ рдХреА рдкреНрд░рддрд┐рдкрджрд╛ рд╕реЗ рд╢реБрд░реВ рд╣реЛрдХрд░ рдирд╡рдореА (9рд╡реЗрдВ рджрд┐рди) рдкрд░ рд╕рдорд╛рдкреНрдд рд╣реЛрддреА рд╣реИред\n10рд╡реЗрдВ рджрд┐рди рдХреЛ рд╡рд┐рдЬрдпрд╛ рджрд╢рдореА (рджрд╢рд╣рд░рд╛) рдХреЗ рд░реВрдк рдореЗрдВ рдордирд╛рдпрд╛ рдЬрд╛рддрд╛ рд╣реИред'
          }
        },
        note: {
          en: 'These two Navratris are the most important, though there are also Magha Gupt Navratri and Ashadha Gupt Navratri celebrated in some traditions.',
          hi: 'рдпреЗ рджреЛ рдирд╡рд░рд╛рддреНрд░рд┐ рд╕рдмрд╕реЗ рдорд╣рддреНрд╡рдкреВрд░реНрдг рд╣реИрдВ, рд╣рд╛рд▓рд╛рдВрдХрд┐ рдХреБрдЫ рдкрд░рдВрдкрд░рд╛рдУрдВ рдореЗрдВ рдорд╛рдШ рдЧреБрдкреНрдд рдирд╡рд░рд╛рддреНрд░рд┐ рдФрд░ рдЖрд╖рд╛рдврд╝ рдЧреБрдкреНрдд рдирд╡рд░рд╛рддреНрд░рд┐ рднреА рдордирд╛рдИ рдЬрд╛рддреА рд╣реИрдВред'
        }
      },
      poojaVidhi: {
        kalashSthapana: {
          title: { en: '1. Kalash Sthapana (Ghatasthapana)', hi: '1. рдХрд▓рд╢ рд╕реНрдерд╛рдкрдирд╛ (рдШрдЯрд╕реНрдерд╛рдкрдирд╛)' },
          steps: {
            en: 'тАв Bathe early in the morning and wear clean clothes.\nтАв Place a wooden platform, cover it with a red cloth.\nтАв Sow barley/wheat seeds on the platform.\nтАв Place a water-filled Kalash (pot) with mango leaves and coconut on it.\nтАв Light an Akhand Jyoti (unbroken flame).',
            hi: 'тАв рд╕реБрдмрд╣ рдЬрд▓реНрджреА рд╕реНрдирд╛рди рдХрд░реЗрдВ рдФрд░ рд╕рд╛рдл рдХрдкрдбрд╝реЗ рдкрд╣рдиреЗрдВред\nтАв рдПрдХ рд▓рдХрдбрд╝реА рдХрд╛ рдордВрдЪ рд░рдЦреЗрдВ, рдЙрд╕реЗ рд▓рд╛рд▓ рдХрдкрдбрд╝реЗ рд╕реЗ рдврдХреЗрдВред\nтАв рдордВрдЪ рдкрд░ рдЬреМ/рдЧреЗрд╣реВрдВ рдХреЗ рдмреАрдЬ рдмреЛрдПрдВред\nтАв рдЙрд╕ рдкрд░ рдЖрдо рдХреЗ рдкрддреНрддреЛрдВ рдФрд░ рдирд╛рд░рд┐рдпрд▓ рдХреЗ рд╕рд╛рде рдкрд╛рдиреА рд╕реЗ рднрд░рд╛ рдХрд▓рд╢ (рдмрд░реНрддрди) рд░рдЦреЗрдВред\nтАв рдПрдХ рдЕрдЦрдВрдб рдЬреНрдпреЛрддрд┐ (рдЕрдЦрдВрдб рд▓реМ) рдЬрд▓рд╛рдПрдВред'
          }
        },
        deviPooja: {
          title: { en: '2. Devi Pooja', hi: '2. рджреЗрд╡реА рдкреВрдЬрд╛' },
          steps: {
            en: 'тАв Install an idol or image of Maa Durga.\nтАв Offer flowers, sindoor, rice, garland, and red cloth.\nтАв Recite Durga Saptashati / Devi Mahatmya.\nтАв Offer bhog daily (fruits, sweets, milk-based food, kheer, halwa).',
            hi: 'тАв рдорд╛рдВ рджреБрд░реНрдЧрд╛ рдХреА рдореВрд░реНрддрд┐ рдпрд╛ рдЪрд┐рддреНрд░ рд╕реНрдерд╛рдкрд┐рдд рдХрд░реЗрдВред\nтАв рдлреВрд▓, рд╕рд┐рдВрджреВрд░, рдЪрд╛рд╡рд▓, рдорд╛рд▓рд╛ рдФрд░ рд▓рд╛рд▓ рдХрдкрдбрд╝рд╛ рдЕрд░реНрдкрд┐рдд рдХрд░реЗрдВред\nтАв рджреБрд░реНрдЧрд╛ рд╕рдкреНрддрд╢рддреА / рджреЗрд╡реА рдорд╣рд╛рддреНрдореНрдп рдХрд╛ рдкрд╛рда рдХрд░реЗрдВред\nтАв рджреИрдирд┐рдХ рднреЛрдЧ рдЕрд░реНрдкрд┐рдд рдХрд░реЗрдВ (рдлрд▓, рдорд┐рдард╛рдИ, рджреВрдз рдЖрдзрд╛рд░рд┐рдд рднреЛрдЬрди, рдЦреАрд░, рд╣рд▓рд╡рд╛)ред'
          }
        },
        katha: {
          title: { en: '3. Katha (Story of Navratri)', hi: '3. рдХрдерд╛ (рдирд╡рд░рд╛рддреНрд░рд┐ рдХреА рдХрд╣рд╛рдиреА)' },
          text: {
            en: 'The story comes from Devi Mahatmya (Durga Saptashati):\n\nGoddess Durga was created from the combined powers of Brahma, Vishnu, and Shiva to destroy the demon Mahishasura.\n\nShe fought for nine days and killed him on the 10th day (Vijaya Dashami).\n\nShe also defeated Chanda, Munda, Raktabeej, Shumbha, and Nishumbha in later battles, manifesting as Mahakali, Mahalakshmi, and Mahasaraswati.',
            hi: 'рдХрд╣рд╛рдиреА рджреЗрд╡реА рдорд╣рд╛рддреНрдореНрдп (рджреБрд░реНрдЧрд╛ рд╕рдкреНрддрд╢рддреА) рд╕реЗ рдЖрддреА рд╣реИ:\n\nрджреЗрд╡реА рджреБрд░реНрдЧрд╛ рдХреЛ рд░рд╛рдХреНрд╖рд╕ рдорд╣рд┐рд╖рд╛рд╕реБрд░ рдХреЛ рдирд╖реНрдЯ рдХрд░рдиреЗ рдХреЗ рд▓рд┐рдП рдмреНрд░рд╣реНрдорд╛, рд╡рд┐рд╖реНрдгреБ рдФрд░ рд╢рд┐рд╡ рдХреА рд╕рдВрдпреБрдХреНрдд рд╢рдХреНрддрд┐рдпреЛрдВ рд╕реЗ рдмрдирд╛рдпрд╛ рдЧрдпрд╛ рдерд╛ред\n\nрдЙрдиреНрд╣реЛрдВрдиреЗ рдиреМ рджрд┐рдиреЛрдВ рддрдХ рд▓рдбрд╝рд╛рдИ рдХреА рдФрд░ 10рд╡реЗрдВ рджрд┐рди (рд╡рд┐рдЬрдпрд╛ рджрд╢рдореА) рдЙрд╕реЗ рдорд╛рд░ рдбрд╛рд▓рд╛ред\n\nрдЙрдиреНрд╣реЛрдВрдиреЗ рдмрд╛рдж рдХреА рд▓рдбрд╝рд╛рдЗрдпреЛрдВ рдореЗрдВ рдЪрдВрдб, рдореБрдВрдб, рд░рдХреНрддрдмреАрдЬ, рд╢реБрдВрдн рдФрд░ рдирд┐рд╢реБрдВрдн рдХреЛ рднреА рд╣рд░рд╛рдпрд╛, рдорд╣рд╛рдХрд╛рд▓реА, рдорд╣рд╛рд▓рдХреНрд╖реНрдореА рдФрд░ рдорд╣рд╛рд╕рд░рд╕реНрд╡рддреА рдХреЗ рд░реВрдк рдореЗрдВ рдкреНрд░рдХрдЯ рд╣реЛрдХрд░ред'
          }
        },
        fasting: {
          title: { en: '4. Fasting Rules', hi: '4. рдЙрдкрд╡рд╛рд╕ рдХреЗ рдирд┐рдпрдо' },
          steps: {
            en: 'тАв Take a vow (sankalp) in front of Maa Durga.\nтАв Eat only sattvik food, avoiding onion, garlic, alcohol, and non-vegetarian items.\nтАв Many devotees eat once a day with fruits and milk.',
            hi: 'тАв рдорд╛рдВ рджреБрд░реНрдЧрд╛ рдХреЗ рд╕рд╛рдордиреЗ рд╕рдВрдХрд▓реНрдк рд▓реЗрдВред\nтАв рдХреЗрд╡рд▓ рд╕рд╛рддреНрд╡рд┐рдХ рднреЛрдЬрди рдЦрд╛рдПрдВ, рдкреНрдпрд╛рдЬ, рд▓рд╣рд╕реБрди, рд╢рд░рд╛рдм рдФрд░ рдорд╛рдВрд╕рд╛рд╣рд╛рд░реА рд╡рд╕реНрддреБрдУрдВ рд╕реЗ рдмрдЪреЗрдВред\nтАв рдХрдИ рднрдХреНрдд рдлрд▓ рдФрд░ рджреВрдз рдХреЗ рд╕рд╛рде рджрд┐рди рдореЗрдВ рдПрдХ рдмрд╛рд░ рдЦрд╛рддреЗ рд╣реИрдВред'
          }
        },
        havan: {
          title: { en: '5. Havan (On Ashtami or Navami)', hi: '5. рд╣рд╡рди (рдЕрд╖реНрдЯрдореА рдпрд╛ рдирд╡рдореА рдкрд░)' },
          steps: {
            en: 'тАв After recitation of Durga Saptashati, perform havan.\nтАв Offer ghee, sesame, rice, herbs with each mantra "Swaha."',
            hi: 'тАв рджреБрд░реНрдЧрд╛ рд╕рдкреНрддрд╢рддреА рдХреЗ рдкрд╛рда рдХреЗ рдмрд╛рдж, рд╣рд╡рди рдХрд░реЗрдВред\nтАв рдкреНрд░рддреНрдпреЗрдХ рдордВрддреНрд░ "рд╕реНрд╡рд╛рд╣рд╛" рдХреЗ рд╕рд╛рде рдШреА, рддрд┐рд▓, рдЪрд╛рд╡рд▓, рдЬрдбрд╝реА-рдмреВрдЯрд┐рдпрд╛рдВ рдЕрд░реНрдкрд┐рдд рдХрд░реЗрдВред'
          }
        },
        kanyaPoojan: {
          title: { en: '6. Kanya Poojan (Ashtami or Navami)', hi: '6. рдХрдиреНрдпрд╛ рдкреВрдЬрди (рдЕрд╖реНрдЯрдореА рдпрд╛ рдирд╡рдореА рдкрд░)' },
          steps: {
            en: 'тАв Invite 7, 9, or 11 girls (aged 2тАУ10 years).\nтАв Wash their feet, apply tilak, and worship them as forms of the Goddess.\nтАв Serve them food (puri, halwa, chana).\nтАв Offer gifts and dakshina.',
            hi: 'тАв 7, 9, рдпрд╛ 11 рд▓рдбрд╝рдХрд┐рдпреЛрдВ (2-10 рд╡рд░реНрд╖ рдХреА рдЖрдпреБ) рдХреЛ рдЖрдордВрддреНрд░рд┐рдд рдХрд░реЗрдВред\nтАв рдЙрдирдХреЗ рдкреИрд░ рдзреЛрдПрдВ, рддрд┐рд▓рдХ рд▓рдЧрд╛рдПрдВ, рдФрд░ рдЙрдиреНрд╣реЗрдВ рджреЗрд╡реА рдХреЗ рд░реВрдкреЛрдВ рдХреЗ рд░реВрдк рдореЗрдВ рдкреВрдЬреЗрдВред\nтАв рдЙрдиреНрд╣реЗрдВ рднреЛрдЬрди рдкрд░реЛрд╕реЗрдВ (рдкреВрд░реА, рд╣рд▓рд╡рд╛, рдЪрдирд╛)ред\nтАв рдЙрдкрд╣рд╛рд░ рдФрд░ рджрдХреНрд╖рд┐рдгрд╛ рдЕрд░реНрдкрд┐рдд рдХрд░реЗрдВред'
          }
        }
      },
      difference: {
        en: 'Chaitra Navratri ends with Ram Navami (birth of Lord Rama).\n\nSharad Navratri ends with Vijaya Dashami (Dussehra), symbolizing Durga\'s victory over Mahishasura and Lord Rama\'s victory over Ravana.',
        hi: 'рдЪреИрддреНрд░ рдирд╡рд░рд╛рддреНрд░рд┐ рд░рд╛рдо рдирд╡рдореА (рднрдЧрд╡рд╛рди рд░рд╛рдо рдХрд╛ рдЬрдиреНрдо) рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрддреА рд╣реИред\n\nрд╢рд╛рд░рджреАрдп рдирд╡рд░рд╛рддреНрд░рд┐ рд╡рд┐рдЬрдпрд╛ рджрд╢рдореА (рджрд╢рд╣рд░рд╛) рдХреЗ рд╕рд╛рде рд╕рдорд╛рдкреНрдд рд╣реЛрддреА рд╣реИ, рдЬреЛ рджреБрд░реНрдЧрд╛ рдХреА рдорд╣рд┐рд╖рд╛рд╕реБрд░ рдкрд░ рдЬреАрдд рдФрд░ рднрдЧрд╡рд╛рди рд░рд╛рдо рдХреА рд░рд╛рд╡рдг рдкрд░ рдЬреАрдд рдХрд╛ рдкреНрд░рддреАрдХ рд╣реИред'
      },
      story: {
        en: 'Once upon a time, the demon king Mahishasura conquered heaven and drove out the gods. The gods prayed to Brahma, Vishnu, and Shiva, who combined their powers to create Goddess Durga.\n\nThe Goddess, armed with divine weapons, fought Mahishasura for nine nights and ten days. Finally, she killed him on the tenth day, restoring peace to heaven.\n\nShe also destroyed other powerful demons like Chanda, Munda, Raktabeej, Shumbha, and Nishumbha, showing her different forms тАУ Mahakali, Mahalakshmi, and Mahasaraswati.\n\nThus, Navratri celebrates the victory of divine power (Shakti) over evil and reminds devotees that faith, devotion, and discipline lead to triumph.',
        hi: 'рдПрдХ рд╕рдордп рдХреА рдмрд╛рдд рд╣реИ, рд░рд╛рдХреНрд╖рд╕ рд░рд╛рдЬрд╛ рдорд╣рд┐рд╖рд╛рд╕реБрд░ рдиреЗ рд╕реНрд╡рд░реНрдЧ рдкрд░ рд╡рд┐рдЬрдп рдкреНрд░рд╛рдкреНрдд рдХреА рдФрд░ рджреЗрд╡рддрд╛рдУрдВ рдХреЛ рдмрд╛рд╣рд░ рдирд┐рдХрд╛рд▓ рджрд┐рдпрд╛ред рджреЗрд╡рддрд╛рдУрдВ рдиреЗ рдмреНрд░рд╣реНрдорд╛, рд╡рд┐рд╖реНрдгреБ рдФрд░ рд╢рд┐рд╡ рд╕реЗ рдкреНрд░рд╛рд░реНрдердирд╛ рдХреА, рдЬрд┐рдиреНрд╣реЛрдВрдиреЗ рджреЗрд╡реА рджреБрд░реНрдЧрд╛ рдХреЛ рдмрдирд╛рдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдкрдиреА рд╢рдХреНрддрд┐рдпреЛрдВ рдХреЛ рдорд┐рд▓рд╛рдпрд╛ред\n\nрджреЗрд╡реА, рджрд┐рд╡реНрдп рд╣рдерд┐рдпрд╛рд░реЛрдВ рд╕реЗ рд╕реБрд╕рдЬреНрдЬрд┐рдд, рдиреМ рд░рд╛рддреЛрдВ рдФрд░ рджрд╕ рджрд┐рдиреЛрдВ рддрдХ рдорд╣рд┐рд╖рд╛рд╕реБрд░ рд╕реЗ рд▓рдбрд╝реАрдВред рдЕрдВрдд рдореЗрдВ, рдЙрдиреНрд╣реЛрдВрдиреЗ рджрд╕рд╡реЗрдВ рджрд┐рди рдЙрд╕реЗ рдорд╛рд░ рдбрд╛рд▓рд╛, рд╕реНрд╡рд░реНрдЧ рдореЗрдВ рд╢рд╛рдВрддрд┐ рдмрд╣рд╛рд▓ рдХреАред\n\nрдЙрдиреНрд╣реЛрдВрдиреЗ рдЪрдВрдб, рдореБрдВрдб, рд░рдХреНрддрдмреАрдЬ, рд╢реБрдВрдн рдФрд░ рдирд┐рд╢реБрдВрдн рдЬреИрд╕реЗ рдЕрдиреНрдп рд╢рдХреНрддрд┐рд╢рд╛рд▓реА рд░рд╛рдХреНрд╖рд╕реЛрдВ рдХреЛ рднреА рдирд╖реНрдЯ рдХрд┐рдпрд╛, рдЕрдкрдиреЗ рд╡рд┐рднрд┐рдиреНрди рд░реВрдкреЛрдВ рдХреЛ рджрд┐рдЦрд╛рддреЗ рд╣реБрдП тАУ рдорд╣рд╛рдХрд╛рд▓реА, рдорд╣рд╛рд▓рдХреНрд╖реНрдореА рдФрд░ рдорд╣рд╛рд╕рд░рд╕реНрд╡рддреАред\n\nрдЗрд╕ рдкреНрд░рдХрд╛рд░, рдирд╡рд░рд╛рддреНрд░рд┐ рджрд┐рд╡реНрдп рд╢рдХреНрддрд┐ (рд╢рдХреНрддрд┐) рдХреА рдмреБрд░рд╛рдИ рдкрд░ рдЬреАрдд рдХрд╛ рдЙрддреНрд╕рд╡ рдордирд╛рддреА рд╣реИ рдФрд░ рднрдХреНрддреЛрдВ рдХреЛ рдпрд╛рдж рджрд┐рд▓рд╛рддреА рд╣реИ рдХрд┐ рд╡рд┐рд╢реНрд╡рд╛рд╕, рднрдХреНрддрд┐ рдФрд░ рдЕрдиреБрд╢рд╛рд╕рди рд╡рд┐рдЬрдп рдХреА рдУрд░ рд▓реЗ рдЬрд╛рддреЗ рд╣реИрдВред'
      }
    }
  };

  const sections = [
    'importance', 'dates', 'poojaVidhi', 'difference', 'story'
  ];

  const scrollToSection = (section: string) => {
    if (sectionY.current[section] && scrollRef.current) {
      scrollRef.current.scrollTo({
        y: sectionY.current[section] - 100,
        animated: true,
      });
    }
  };

  const onSectionLayout = (section: string, event: any) => {
    const { y } = event.nativeEvent.layout;
    sectionY.current[section] = y;
  };

  return (
    <View style={styles.container}>
      <LinearGradient
        colors={['#FFA040', '#FF6A00']}
        style={styles.gradient}
      />
      
      <HomeHeader 
        enableSpiritualSearch={true} 
        showSearchBar={true} 
        showDailyPujaButton={false}
        showLanguageToggle={false}
        showTopicDropdown={false}
        onSearchChange={setSearchHighlight}
      />
      
      <ScrollView 
        ref={scrollRef}
        style={styles.scrollView}
        contentContainerStyle={styles.scrollContent}
        showsVerticalScrollIndicator={false}
      >
        <View style={styles.content}>
          <Text style={styles.title}>
            {isHindi ? translations.content.title.hi : translations.content.title.en}
          </Text>

          {/* Importance Section */}
          <View 
            style={styles.section}
            onLayout={(event) => onSectionLayout('importance', event)}
          >
            <Text style={styles.sectionTitle}>
              {isHindi ? translations.sections.importance.hi : translations.sections.importance.en}
            </Text>
            <HighlightedText 
              text={isHindi ? translations.content.importance.intro.hi : translations.content.importance.intro.en}
              highlight={searchHighlight}
              style={styles.paragraph}
            />
            <HighlightedText 
              text={isHindi ? translations.content.importance.points.hi : translations.content.importance.points.en}
              highlight={searchHighlight}
              style={styles.paragraph}
            />
          </View>

          {/* Dates Section */}
          <View 
            style={styles.section}
            onLayout={(event) => onSectionLayout('dates', event)}
          >
            <Text style={styles.sectionTitle}>
              {isHindi ? translations.sections.dates.hi : translations.sections.dates.en}
            </Text>
            
            <View style={styles.subsection}>
              <Text style={styles.subsectionTitle}>
                {isHindi ? translations.content.dates.chaitra.title.hi : translations.content.dates.chaitra.title.en}
              </Text>
              <HighlightedText 
                text={isHindi ? translations.content.dates.chaitra.text.hi : translations.content.dates.chaitra.text.en}
                highlight={searchHighlight}
                style={styles.paragraph}
              />
            </View>

            <View style={styles.subsection}>
              <Text style={styles.subsectionTitle}>
                {isHindi ? translations.content.dates.sharad.title.hi : translations.content.dates.sharad.title.en}
              </Text>
              <HighlightedText 
                text={isHindi ? translations.content.dates.sharad.text.hi : translations.content.dates.sharad.text.en}
                highlight={searchHighlight}
                style={styles.paragraph}
              />
            </View>

            <HighlightedText 
              text={isHindi ? translations.content.dates.note.hi : translations.content.dates.note.en}
              highlight={searchHighlight}
              style={styles.paragraph}
            />
          </View>

          {/* Pooja Vidhi Section */}
          <View 
            style={styles.section}
            onLayout={(event) => onSectionLayout('poojaVidhi', event)}
          >
            <Text style={styles.sectionTitle}>
              {isHindi ? translations.sections.poojaVidhi.hi : translations.sections.poojaVidhi.en}
            </Text>
            
            <View style={styles.subsection}>
              <Text style={styles.subsectionTitle}>
                {isHindi ? translations.content.poojaVidhi.kalashSthapana.title.hi : translations.content.poojaVidhi.kalashSthapana.title.en}
              </Text>
              <HighlightedText 
                text={isHindi ? translations.content.poojaVidhi.kalashSthapana.steps.hi : translations.content.poojaVidhi.kalashSthapana.steps.en}
                highlight={searchHighlight}
                style={styles.paragraph}
              />
            </View>

            <View style={styles.subsection}>
              <Text style={styles.subsectionTitle}>
                {isHindi ? translations.content.poojaVidhi.deviPooja.title.hi : translations.content.poojaVidhi.deviPooja.title.en}
              </Text>
              <HighlightedText 
                text={isHindi ? translations.content.poojaVidhi.deviPooja.steps.hi : translations.content.poojaVidhi.deviPooja.steps.en}
                highlight={searchHighlight}
                style={styles.paragraph}
              />
            </View>

            <View style={styles.subsection}>
              <Text style={styles.subsectionTitle}>
                {isHindi ? translations.content.poojaVidhi.katha.title.hi : translations.content.poojaVidhi.katha.title.en}
              </Text>
              <HighlightedText 
                text={isHindi ? translations.content.poojaVidhi.katha.text.hi : translations.content.poojaVidhi.katha.text.en}
                highlight={searchHighlight}
                style={styles.paragraph}
              />
            </View>

            <View style={styles.subsection}>
              <Text style={styles.subsectionTitle}>
                {isHindi ? translations.content.poojaVidhi.fasting.title.hi : translations.content.poojaVidhi.fasting.title.en}
              </Text>
              <HighlightedText 
                text={isHindi ? translations.content.poojaVidhi.fasting.steps.hi : translations.content.poojaVidhi.fasting.steps.en}
                highlight={searchHighlight}
                style={styles.paragraph}
              />
            </View>

            <View style={styles.subsection}>
              <Text style={styles.subsectionTitle}>
                {isHindi ? translations.content.poojaVidhi.havan.title.hi : translations.content.poojaVidhi.havan.title.en}
              </Text>
              <HighlightedText 
                text={isHindi ? translations.content.poojaVidhi.havan.steps.hi : translations.content.poojaVidhi.havan.steps.en}
                highlight={searchHighlight}
                style={styles.paragraph}
              />
            </View>

            <View style={styles.subsection}>
              <Text style={styles.subsectionTitle}>
                {isHindi ? translations.content.poojaVidhi.kanyaPoojan.title.hi : translations.content.poojaVidhi.kanyaPoojan.title.en}
              </Text>
              <HighlightedText 
                text={isHindi ? translations.content.poojaVidhi.kanyaPoojan.steps.hi : translations.content.poojaVidhi.kanyaPoojan.steps.en}
                highlight={searchHighlight}
                style={styles.paragraph}
              />
            </View>
          </View>

          {/* Difference Section */}
          <View 
            style={styles.section}
            onLayout={(event) => onSectionLayout('difference', event)}
          >
            <Text style={styles.sectionTitle}>
              {isHindi ? translations.sections.difference.hi : translations.sections.difference.en}
            </Text>
            <HighlightedText 
              text={isHindi ? translations.content.difference.hi : translations.content.difference.en}
              highlight={searchHighlight}
              style={styles.paragraph}
            />
          </View>

          {/* Story Section */}
          <View 
            style={styles.section}
            onLayout={(event) => onSectionLayout('story', event)}
          >
            <Text style={styles.sectionTitle}>
              {isHindi ? translations.sections.story.hi : translations.sections.story.en}
            </Text>
            <HighlightedText 
              text={isHindi ? translations.content.story.hi : translations.content.story.en}
              highlight={searchHighlight}
              style={styles.paragraph}
            />
          </View>
        </View>
      </ScrollView>
    </View>
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff', // White background for the screen
  },
  gradient: {
    position: 'absolute',
    left: 0,
    right: 0,
    top: 0,
    height: 120, // Only cover the header area
  },
  scrollView: {
    flex: 1,
  },
  scrollContent: {
    paddingBottom: 100,
  },
  content: {
    padding: 20,
    paddingTop: 100,
  },
  title: {
    fontSize: 24,
    fontWeight: 'bold',
    color: '#FF6A00',
    textAlign: 'center',
    marginBottom: 30,
    textShadowColor: 'rgba(0, 0, 0, 0.1)',
    textShadowOffset: { width: 1, height: 1 },
    textShadowRadius: 2,
  },
  section: {
    marginBottom: 30,
    backgroundColor: 'rgba(255, 255, 255, 0.95)',
    borderRadius: 15,
    padding: 20,
    shadowColor: '#000',
    shadowOffset: {
      width: 0,
      height: 2,
    },
    shadowOpacity: 0.1,
    shadowRadius: 3.84,
    elevation: 5,
  },
  subsection: {
    marginBottom: 20,
    backgroundColor: '#f8f9fa',
    borderRadius: 10,
    padding: 15,
    borderLeftWidth: 4,
    borderLeftColor: '#FF6A00',
  },
  sectionTitle: {
    fontSize: 20,
    fontWeight: 'bold',
    color: '#FF6A00',
    marginBottom: 15,
    textAlign: 'center',
  },
  subsectionTitle: {
    fontSize: 18,
    fontWeight: '600',
    color: '#FF6A00',
    marginBottom: 10,
    textAlign: 'center',
  },
  paragraph: {
    fontSize: 16,
    lineHeight: 24,
    color: '#333',
    textAlign: 'justify',
    marginBottom: 15,
  },
});
